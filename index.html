<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>idcrypt — Emoji Picker</title>
<meta name="description" content="Lightweight, searchable emoji picker for idcrypt — copy emoji to clipboard. Embed via iframe in Blogger." />
<style>
  :root{--bg:#f6fbff;--card:#fff;--muted:#557;--accent:#cfe9ff}
  body{margin:0;font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial;background:var(--bg);color:#0b1a2b}
  .wrap{max-width:1100px;margin:28px auto;padding:18px}
  header{display:flex;align-items:center;gap:14px}
  h1{font-size:20px;margin:0}
  .lead{color:var(--muted);margin:6px 0 14px}
  .controls{display:flex;gap:10px;flex-wrap:wrap;margin-bottom:12px}
  input.search{flex:1;min-width:220px;padding:10px;border-radius:10px;border:1px solid #d7e9f6}
  select.cat{padding:10px;border-radius:10px;border:1px solid #d7e9f6}
  button.clear{padding:10px;border-radius:10px;border:0;background:#0b69b2;color:#fff}
  /* middle light-blue visual */
  .visual{background:#eaf6ff;padding:12px;border-radius:10px;margin-bottom:12px}
  .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(90px,1fr));gap:12px}
  .card{background:var(--card);border-radius:12px;padding:12px;box-shadow:0 2px 6px rgba(11,26,43,0.04);display:flex;flex-direction:column;align-items:center;justify-content:center;height:120px;box-sizing:border-box}
  .char{font-size:34px;line-height:1;margin-bottom:6px;color:inherit}
  .btn{padding:6px 10px;border-radius:8px;border:0;background:#007bff;color:#fff;font-size:13px;cursor:pointer}
  .small{font-size:12px;color:var(--muted);margin-top:4px}
  .toast{position:fixed;right:18px;bottom:18px;background:#0b69b2;color:#fff;padding:10px 14px;border-radius:10px;display:none}
  .loading{padding:18px;text-align:center;color:var(--muted)}
  footer{margin-top:14px;color:var(--muted);font-size:13px}
  @media(max-width:420px){.card{height:96px}.char{font-size:26px}}
</style>
</head>
<body>
<div class="wrap">
  <header>
    <div style="width:56px;height:56px;border-radius:10px;background:linear-gradient(135deg,var(--accent),#eaf6ff);display:flex;align-items:center;justify-content:center;font-weight:700">ID</div>
    <div>
      <h1>idcrypt Emoji Picker</h1>
      <div class="lead">Search and copy emojis — optimized for embedding in Blogger via iframe.</div>
    </div>
  </header>

  <div class="controls">
    <input id="q" class="search" placeholder="Search emoji or name (e.g. rocket, fire)" aria-label="Search emojis" />
    <select id="cat" class="cat" aria-label="Category"></select>
    <button id="clear" class="clear">Reset</button>
  </div>

  <div class="visual"><strong>Tip:</strong> Click "Copy" to copy the emoji character. This page is static, fast, and safe to embed via iframe.</div>

  <div id="loading" class="loading">Loading emojis…</div>
  <div id="grid" class="grid" aria-live="polite" role="list"></div>

  <div id="toast" class="toast" role="status" aria-live="polite">Copied ✓</div>

  <footer>Deploy this file to GitHub Pages and embed via &lt;iframe&gt; for Blogger. See README in repo for instructions.</footer>
</div>

<script>
// Emoji picker for GitHub Pages — loads emoji metadata, converts unified -> char
(function(){
  const RAW = 'https://raw.githubusercontent.com/iamcal/emoji-data/master/emoji.json';
  const grid = document.getElementById('grid');
  const q = document.getElementById('q');
  const cat = document.getElementById('cat');
  const toast = document.getElementById('toast');
  const loading = document.getElementById('loading');
  const clearBtn = document.getElementById('clear');
  let emojis = [];

  function unifiedToChar(unified){
    // unified like '1F436' or '1F3FB-200D-2642-FE0F'
    try{
      return unified.split('-').map(u=>parseInt(u,16)).map(cp=>String.fromCodePoint(cp)).join('');
    }catch(e){return ''}
  }

  function buildList(raw){
    return raw.map(e=>{
      const char = e.char || (e.unified? unifiedToChar(e.unified) : '');
      return {char, name: e.name || e.short_name || '', category: (e.category||'other').toLowerCase()};
    }).filter(x=>x.char);
  }

  function uniqueCategories(list){
    const s = new Set(list.map(i=>i.category));
    return Array.from(s).sort();
  }

  function showToast(text){
    toast.textContent = text||'Copied ✓';
    toast.style.display = 'block';
    clearTimeout(window.__to);
    window.__to = setTimeout(()=>toast.style.display='none',1200);
  }

  function copyText(t){
    if(!t) return;
    if(navigator.clipboard && navigator.clipboard.writeText){
      navigator.clipboard.writeText(t).then(()=>showToast('Copied ✓')).catch(()=>fallback(t));
    } else fallback(t);
  }
  function fallback(t){
    try{const ta=document.createElement('textarea');ta.value=t;ta.style.position='fixed';ta.style.left='-9999px';document.body.appendChild(ta);ta.select();document.execCommand('copy');ta.remove();showToast('Copied ✓');}catch(e){console.error(e);showToast('Copy failed');}
  }

  function render(list){
    grid.innerHTML = '';
    if(!list.length){ grid.innerHTML='<div class="loading">No emojis found</div>'; return; }
    const frag = document.createDocumentFragment();
    list.forEach(i=>{
      const card = document.createElement('div'); card.className='card'; card.setAttribute('role','listitem');
      const ch = document.createElement('div'); ch.className='char'; ch.textContent = i.char; ch.setAttribute('aria-hidden','true');
      const btn = document.createElement('button'); btn.className='btn'; btn.type='button'; btn.textContent='Copy';
      btn.addEventListener('click', ()=>{ copyText(i.char); btn.textContent='Copied!'; setTimeout(()=>btn.textContent='Copy',700); });
      const sm = document.createElement('div'); sm.className='small'; sm.textContent = i.name;
      card.appendChild(ch); card.appendChild(btn); card.appendChild(sm);
      frag.appendChild(card);
    });
    grid.appendChild(frag);
  }

  function applyFilters(){
    const qv = (q.value||'').toLowerCase().trim();
    const cv = (cat.value||'all');
    const out = emojis.filter(i=>{
      if(cv !== 'all' && i.category !== cv) return false;
      if(!qv) return true;
      return (i.name||'').toLowerCase().includes(qv) || (i.char||'').includes(qv);
    });
    render(out);
  }

  async function init(){
    loading.style.display='block';
    try{
      const res = await fetch(RAW);
      if(!res.ok) throw new Error('Failed to fetch');
      const raw = await res.json();
      emojis = buildList(raw);
      const cats = uniqueCategories(emojis);
      cat.innerHTML = '<option value="all">All</option>' + cats.map(c=>`<option value="${c}">${c}</option>`).join('');
      applyFilters();
    }catch(e){ console.error(e); grid.innerHTML='<div class="loading">Failed to load emoji data</div>'; }
    loading.style.display='none';
  }

  q.addEventListener('input', applyFilters);
  cat.addEventListener('change', applyFilters);
  clearBtn.addEventListener('click', ()=>{ q.value=''; cat.value='all'; applyFilters(); });

  init();
})();
</script>
</body>
</html>
